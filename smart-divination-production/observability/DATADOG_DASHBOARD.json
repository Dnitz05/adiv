{
  "title": "Smart Divination API â€“ Latency & Traffic",
  "description": "Core latency and request metrics grouped by endpoint.",
  "widgets": [
    {
      "definition": {
        "title": "Latency (avg) by endpoint (5m)",
        "type": "timeseries",
        "requests": [
          {
            "q": "avg:smart_divination.api.latency_ms{*} by {endpoint}",
            "display_type": "line",
            "name": "avg latency"
          }
        ],
        "show_legend": true
      }
    },
    {
      "definition": {
        "title": "Requests per minute (sum) by endpoint",
        "type": "timeseries",
        "requests": [
          {
            "q": "sum:smart_divination.api.requests{*}.rollup(sum, 60) by {endpoint}",
            "display_type": "bars",
            "name": "rpm"
          }
        ],
        "show_legend": true
      }
    },
    {
      "definition": {
        "title": "5xx rate % by endpoint (5m)",
        "type": "query_value",
        "requests": [
          {
            "q": "100 * (sum:smart_divination.api.requests{status_group:5xx}.rollup(sum,300) by {endpoint}) / (sum:smart_divination.api.requests{*}.rollup(sum,300) by {endpoint})",
            "aggregator": "avg"
          }
        ],
        "autoscale": true
      }
    }
  ],
  "layout_type": "ordered"
}

